<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- SEO 기본 메타 (동적으로 업데이트됨) -->
  <title>TOP50 종목 사건 아카이브 | miso_daily</title>
  <meta name="description" content="국내외 TOP50 종목의 주요 사건을 실시간으로 정리합니다. 실적, 수주, 규제, 소송 등 투자에 중요한 이슈를 사건 단위로 확인하세요." />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="miso_daily" />
  <meta property="og:title" content="TOP50 종목 사건 아카이브 | miso_daily" />
  <meta property="og:description" content="국내외 TOP50 종목의 주요 사건을 실시간으로 정리합니다." />
  <meta property="og:locale" content="ko_KR" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="TOP50 종목 사건 아카이브 | miso_daily" />
  <meta name="twitter:description" content="국내외 TOP50 종목의 주요 사건을 실시간으로 정리합니다." />

  <!-- Canonical -->
  <link rel="canonical" href="" id="canonical" />

  <style>
    :root {
      --bg: #0b0d12;
      --panel: #121622;
      --panel2: #0f1320;
      --text: #e9edf6;
      --muted: #a9b3c7;
      --line: rgba(255,255,255,.08);
      --accent: #ff6a00;
      --accent2: #ff8a3d;
      --shadow: 0 12px 30px rgba(0,0,0,.35);
      --radius: 18px;
      --radius2: 14px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { min-height: 100vh; }
    body {
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(1200px 700px at 20% -10%, rgba(255,106,0,.18), transparent 60%),
        radial-gradient(900px 600px at 95% 10%, rgba(255,138,61,.10), transparent 55%),
        linear-gradient(180deg, #07080c 0%, var(--bg) 40%, #07080c 100%);
      letter-spacing: -0.2px;
      line-height: 1.5;
    }

    a { color: inherit; text-decoration: none; }
    a:hover { text-decoration: underline; }

    .wrap { max-width: 1120px; margin: 0 auto; padding: 20px 16px 60px; }

    /* Header */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 14px 16px;
      background: rgba(18,22,34,.72);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      position: sticky;
      top: 14px;
      z-index: 100;
      margin-bottom: 20px;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .logo {
      width: 42px;
      height: 42px;
      border-radius: 14px;
      background: linear-gradient(135deg, var(--accent) 0%, #ffb07a 45%, rgba(255,106,0,.18) 100%);
      display: grid;
      place-items: center;
      box-shadow: 0 10px 22px rgba(255,106,0,.20);
      border: 1px solid rgba(255,255,255,.16);
    }
    .brand-text strong { font-size: 16px; display: block; }
    .brand-text span { font-size: 12px; color: var(--muted); }

    .nav-links { display: flex; gap: 8px; flex-wrap: wrap; }
    .nav-link {
      padding: 8px 12px;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 500;
      background: rgba(255,255,255,.04);
      border: 1px solid var(--line);
      transition: .15s;
    }
    .nav-link:hover, .nav-link.active {
      background: rgba(255,106,0,.15);
      border-color: rgba(255,106,0,.4);
      text-decoration: none;
    }

    /* Timezone notice */
    .tz-notice {
      font-size: 11px;
      color: var(--muted);
      text-align: right;
      margin-bottom: 16px;
    }

    /* Tabs */
    .tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }
    .tab {
      padding: 10px 16px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 600;
      background: rgba(255,255,255,.04);
      border: 1px solid var(--line);
      cursor: pointer;
      transition: .15s;
    }
    .tab:hover, .tab.active {
      background: rgba(255,106,0,.15);
      border-color: rgba(255,106,0,.4);
    }

    /* Event Labels Filter */
    .label-filters {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      margin-bottom: 16px;
    }
    .label-pill {
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 11px;
      background: rgba(255,255,255,.04);
      border: 1px solid var(--line);
      cursor: pointer;
      transition: .15s;
    }
    .label-pill:hover, .label-pill.active {
      background: rgba(255,106,0,.15);
      border-color: rgba(255,106,0,.4);
    }

    /* Section headers */
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }
    .section-title {
      font-size: 18px;
      font-weight: 700;
    }
    .section-sub {
      font-size: 12px;
      color: var(--muted);
    }

    /* Stock Grid */
    .stock-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 10px;
      margin-bottom: 24px;
    }
    .stock-item {
      padding: 14px;
      background: rgba(18,22,34,.72);
      border: 1px solid var(--line);
      border-radius: var(--radius2);
      transition: .15s transform, .15s border, .15s background;
    }
    .stock-item:hover {
      transform: translateY(-2px);
      border-color: rgba(255,255,255,.14);
      background: rgba(18,22,34,.85);
      text-decoration: none;
    }
    .stock-ticker {
      font-size: 14px;
      font-weight: 700;
      color: var(--accent2);
    }
    .stock-name {
      font-size: 12px;
      color: var(--muted);
      margin-top: 4px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .stock-badge {
      display: inline-block;
      margin-top: 8px;
      padding: 4px 8px;
      font-size: 10px;
      border-radius: 999px;
      background: rgba(255,106,0,.12);
      border: 1px solid rgba(255,106,0,.35);
    }

    /* Event Cards */
    .event-cards {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .event-card {
      padding: 16px;
      background: rgba(18,22,34,.72);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      transition: .15s transform, .15s border;
    }
    .event-card:hover {
      transform: translateY(-2px);
      border-color: rgba(255,255,255,.14);
      text-decoration: none;
    }
    .event-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 10px;
    }
    .event-ticker-info {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .event-ticker {
      font-size: 13px;
      font-weight: 700;
      color: var(--accent2);
    }
    .event-company {
      font-size: 12px;
      color: var(--muted);
    }
    .event-label {
      padding: 5px 10px;
      font-size: 11px;
      font-weight: 600;
      border-radius: 999px;
      background: rgba(255,106,0,.12);
      border: 1px solid rgba(255,106,0,.35);
      white-space: nowrap;
    }
    .event-label[data-type="earnings"] { background: rgba(76,175,80,.15); border-color: rgba(76,175,80,.4); }
    .event-label[data-type="guidance"] { background: rgba(33,150,243,.15); border-color: rgba(33,150,243,.4); }
    .event-label[data-type="contract"] { background: rgba(156,39,176,.15); border-color: rgba(156,39,176,.4); }
    .event-label[data-type="regulation"] { background: rgba(255,152,0,.15); border-color: rgba(255,152,0,.4); }
    .event-label[data-type="lawsuit"] { background: rgba(244,67,54,.15); border-color: rgba(244,67,54,.4); }
    .event-label[data-type="recall"] { background: rgba(233,30,99,.15); border-color: rgba(233,30,99,.4); }
    .event-label[data-type="macro"] { background: rgba(0,188,212,.15); border-color: rgba(0,188,212,.4); }

    .event-summary {
      font-size: 14px;
      line-height: 1.6;
      margin-bottom: 8px;
    }
    .event-summary li {
      margin-bottom: 4px;
      list-style: none;
      padding-left: 16px;
      position: relative;
    }
    .event-summary li::before {
      content: "•";
      position: absolute;
      left: 0;
      color: var(--accent);
    }
    .event-why {
      font-size: 13px;
      color: var(--muted);
      padding: 10px 12px;
      background: rgba(0,0,0,.2);
      border-radius: 10px;
      margin-bottom: 10px;
    }
    .event-why strong {
      color: var(--text);
    }
    .event-links {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .event-link {
      font-size: 12px;
      color: var(--muted);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .event-link:hover { color: var(--text); }
    .event-link-source {
      padding: 2px 6px;
      background: rgba(255,255,255,.06);
      border-radius: 4px;
      font-size: 10px;
    }
    .event-link-time {
      font-family: var(--mono);
      font-size: 10px;
      opacity: .7;
    }
    .event-time {
      font-size: 11px;
      color: var(--muted);
      font-family: var(--mono);
      margin-top: 10px;
    }

    /* Stock Detail Page */
    .stock-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid var(--line);
    }
    .stock-header-main h1 {
      font-size: 24px;
      font-weight: 700;
    }
    .stock-header-main .ticker {
      font-size: 14px;
      color: var(--accent2);
      font-weight: 600;
    }
    .stock-header-main .exchange {
      font-size: 12px;
      color: var(--muted);
    }

    .timeline-section {
      margin-top: 24px;
    }
    .timeline-date {
      font-size: 12px;
      color: var(--muted);
      font-weight: 600;
      margin: 16px 0 8px;
      padding-left: 4px;
    }

    /* Event Detail Page */
    .event-detail-header {
      margin-bottom: 24px;
    }
    .event-detail-header h1 {
      font-size: 22px;
      font-weight: 700;
      line-height: 1.4;
      margin-bottom: 8px;
    }
    .event-detail-meta {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
      font-size: 13px;
      color: var(--muted);
    }

    .related-section {
      margin-top: 32px;
      padding-top: 20px;
      border-top: 1px solid var(--line);
    }
    .related-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 12px;
    }
    .related-links {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    .related-link {
      padding: 8px 12px;
      font-size: 12px;
      background: rgba(255,255,255,.04);
      border: 1px solid var(--line);
      border-radius: 10px;
      transition: .15s;
    }
    .related-link:hover {
      background: rgba(255,106,0,.15);
      border-color: rgba(255,106,0,.4);
      text-decoration: none;
    }

    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 48px 20px;
      color: var(--muted);
    }
    .empty-state h2 {
      font-size: 18px;
      color: var(--text);
      margin-bottom: 8px;
    }
    .empty-state p {
      font-size: 14px;
      margin-bottom: 16px;
    }

    /* Breadcrumb */
    .breadcrumb {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 16px;
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .breadcrumb a:hover { color: var(--text); }
    .breadcrumb-sep { opacity: .5; }

    /* Footer */
    footer {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid var(--line);
      text-align: center;
      font-size: 12px;
      color: var(--muted);
    }
    footer .accent { color: var(--accent2); font-weight: 700; }

    /* Loading */
    .loading {
      text-align: center;
      padding: 40px;
      color: var(--muted);
    }

    /* Mobile */
    @media (max-width: 768px) {
      .header { flex-direction: column; gap: 12px; }
      .nav-links { width: 100%; justify-content: center; }
      .stock-grid { grid-template-columns: repeat(2, 1fr); }
      .event-header { flex-direction: column; }
    }

    /* Utility */
    .hidden { display: none !important; }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="header">
      <a href="/top50" class="brand">
        <div class="logo" aria-hidden="true">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
            <path d="M5 15c3-7 6-8 9-8 4 0 6 3 6 6 0 4-3 6-7 6-3 0-6-2-8-4Z" stroke="rgba(20,12,6,.85)" stroke-width="2" stroke-linecap="round"/>
            <path d="M7 10h4" stroke="rgba(20,12,6,.85)" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="brand-text">
          <strong>miso_daily</strong>
          <span>TOP50 사건 아카이브</span>
        </div>
      </a>
      <nav class="nav-links">
        <a href="/top50" class="nav-link" data-nav="home">홈</a>
        <a href="/top50?market=kr" class="nav-link" data-nav="kr">국내 25</a>
        <a href="/top50?market=us" class="nav-link" data-nav="us">미국 25</a>
      </nav>
    </header>

    <div class="tz-notice">
      기준 시각: Asia/Seoul (KST) · 출처 링크 클릭시 원문으로 이동
    </div>

    <main id="app">
      <div class="loading">로딩 중...</div>
    </main>

    <footer>
      <p>© <span id="year">2026</span> <span class="accent">miso_daily</span> — TOP50 종목 사건 아카이브</p>
      <p style="margin-top:8px;font-size:11px;opacity:.7;">
        본 서비스는 뉴스 원문을 직접 게시하지 않으며, 출처 링크를 통해 원문을 확인할 수 있습니다.<br>
        투자 조언이 아니며, 투자 결정은 본인의 판단과 책임하에 이루어져야 합니다.
      </p>
    </footer>
  </div>

  <script type="module">
    // ==================== Data Imports ====================
    // TOP50 종목 마스터
    const TOP50_KR = [
      { market: 'kr', ticker: '005930', exchange: 'KRX', name_ko: '삼성전자', name_en: 'Samsung Electronics' },
      { market: 'kr', ticker: '000660', exchange: 'KRX', name_ko: 'SK하이닉스', name_en: 'SK Hynix' },
      { market: 'kr', ticker: '373220', exchange: 'KRX', name_ko: 'LG에너지솔루션', name_en: 'LG Energy Solution' },
      { market: 'kr', ticker: '207940', exchange: 'KRX', name_ko: '삼성바이오로직스', name_en: 'Samsung Biologics' },
      { market: 'kr', ticker: '005380', exchange: 'KRX', name_ko: '현대차', name_en: 'Hyundai Motor' },
      { market: 'kr', ticker: '068270', exchange: 'KRX', name_ko: '셀트리온', name_en: 'Celltrion' },
      { market: 'kr', ticker: '000270', exchange: 'KRX', name_ko: '기아', name_en: 'Kia' },
      { market: 'kr', ticker: '035420', exchange: 'KRX', name_ko: 'NAVER', name_en: 'NAVER' },
      { market: 'kr', ticker: '051910', exchange: 'KRX', name_ko: 'LG화학', name_en: 'LG Chem' },
      { market: 'kr', ticker: '006400', exchange: 'KRX', name_ko: '삼성SDI', name_en: 'Samsung SDI' },
      { market: 'kr', ticker: '035720', exchange: 'KRX', name_ko: '카카오', name_en: 'Kakao' },
      { market: 'kr', ticker: '028260', exchange: 'KRX', name_ko: '삼성물산', name_en: 'Samsung C&T' },
      { market: 'kr', ticker: '105560', exchange: 'KRX', name_ko: 'KB금융', name_en: 'KB Financial' },
      { market: 'kr', ticker: '055550', exchange: 'KRX', name_ko: '신한지주', name_en: 'Shinhan Financial' },
      { market: 'kr', ticker: '012330', exchange: 'KRX', name_ko: '현대모비스', name_en: 'Hyundai Mobis' },
      { market: 'kr', ticker: '066570', exchange: 'KRX', name_ko: 'LG전자', name_en: 'LG Electronics' },
      { market: 'kr', ticker: '003670', exchange: 'KRX', name_ko: '포스코홀딩스', name_en: 'POSCO Holdings' },
      { market: 'kr', ticker: '086790', exchange: 'KRX', name_ko: '하나금융지주', name_en: 'Hana Financial' },
      { market: 'kr', ticker: '034730', exchange: 'KRX', name_ko: 'SK', name_en: 'SK Inc' },
      { market: 'kr', ticker: '096770', exchange: 'KRX', name_ko: 'SK이노베이션', name_en: 'SK Innovation' },
      { market: 'kr', ticker: '032830', exchange: 'KRX', name_ko: '삼성생명', name_en: 'Samsung Life' },
      { market: 'kr', ticker: '003550', exchange: 'KRX', name_ko: 'LG', name_en: 'LG Corp' },
      { market: 'kr', ticker: '017670', exchange: 'KRX', name_ko: 'SK텔레콤', name_en: 'SK Telecom' },
      { market: 'kr', ticker: '030200', exchange: 'KRX', name_ko: 'KT', name_en: 'KT Corp' },
      { market: 'kr', ticker: '036570', exchange: 'KRX', name_ko: '엔씨소프트', name_en: 'NCSOFT' },
    ];

    const TOP50_US = [
      { market: 'us', ticker: 'AAPL', exchange: 'NASDAQ', name_ko: '애플', name_en: 'Apple' },
      { market: 'us', ticker: 'MSFT', exchange: 'NASDAQ', name_ko: '마이크로소프트', name_en: 'Microsoft' },
      { market: 'us', ticker: 'NVDA', exchange: 'NASDAQ', name_ko: '엔비디아', name_en: 'NVIDIA' },
      { market: 'us', ticker: 'GOOGL', exchange: 'NASDAQ', name_ko: '알파벳', name_en: 'Alphabet' },
      { market: 'us', ticker: 'AMZN', exchange: 'NASDAQ', name_ko: '아마존', name_en: 'Amazon' },
      { market: 'us', ticker: 'META', exchange: 'NASDAQ', name_ko: '메타', name_en: 'Meta Platforms' },
      { market: 'us', ticker: 'TSLA', exchange: 'NASDAQ', name_ko: '테슬라', name_en: 'Tesla' },
      { market: 'us', ticker: 'BRK.B', exchange: 'NYSE', name_ko: '버크셔해서웨이', name_en: 'Berkshire Hathaway' },
      { market: 'us', ticker: 'AVGO', exchange: 'NASDAQ', name_ko: '브로드컴', name_en: 'Broadcom' },
      { market: 'us', ticker: 'JPM', exchange: 'NYSE', name_ko: 'JP모건', name_en: 'JPMorgan Chase' },
      { market: 'us', ticker: 'LLY', exchange: 'NYSE', name_ko: '일라이릴리', name_en: 'Eli Lilly' },
      { market: 'us', ticker: 'V', exchange: 'NYSE', name_ko: '비자', name_en: 'Visa' },
      { market: 'us', ticker: 'UNH', exchange: 'NYSE', name_ko: '유나이티드헬스', name_en: 'UnitedHealth' },
      { market: 'us', ticker: 'XOM', exchange: 'NYSE', name_ko: '엑슨모빌', name_en: 'Exxon Mobil' },
      { market: 'us', ticker: 'MA', exchange: 'NYSE', name_ko: '마스터카드', name_en: 'Mastercard' },
      { market: 'us', ticker: 'COST', exchange: 'NASDAQ', name_ko: '코스트코', name_en: 'Costco' },
      { market: 'us', ticker: 'JNJ', exchange: 'NYSE', name_ko: '존슨앤존슨', name_en: 'Johnson & Johnson' },
      { market: 'us', ticker: 'HD', exchange: 'NYSE', name_ko: '홈디포', name_en: 'Home Depot' },
      { market: 'us', ticker: 'PG', exchange: 'NYSE', name_ko: 'P&G', name_en: 'Procter & Gamble' },
      { market: 'us', ticker: 'ABBV', exchange: 'NYSE', name_ko: '애브비', name_en: 'AbbVie' },
      { market: 'us', ticker: 'WMT', exchange: 'NYSE', name_ko: '월마트', name_en: 'Walmart' },
      { market: 'us', ticker: 'NFLX', exchange: 'NASDAQ', name_ko: '넷플릭스', name_en: 'Netflix' },
      { market: 'us', ticker: 'CRM', exchange: 'NYSE', name_ko: '세일즈포스', name_en: 'Salesforce' },
      { market: 'us', ticker: 'AMD', exchange: 'NASDAQ', name_ko: 'AMD', name_en: 'AMD' },
      { market: 'us', ticker: 'ORCL', exchange: 'NYSE', name_ko: '오라클', name_en: 'Oracle' },
    ];

    const TOP50 = [...TOP50_KR, ...TOP50_US];

    // 사건 라벨
    const EVENT_LABELS = {
      earnings: '실적',
      guidance: '가이던스',
      contract: '수주',
      regulation: '규제',
      lawsuit: '소송',
      recall: '리콜/사고',
      macro: '매크로',
      other: '기타',
    };

    // 샘플 이벤트 데이터
    const now = new Date();
    const h = (hours) => new Date(now.getTime() - hours * 60 * 60 * 1000).toISOString();

    const SAMPLE_EVENTS = [
      {
        id: 'kr-005930-2026-02-04-hbm-capacity',
        market: 'kr', ticker: '005930',
        startedAt: h(2), updatedAt: h(1),
        type: 'guidance',
        summary2: ['삼성전자, 2026년 HBM 생산능력 40% 확대 계획 발표.', '엔비디아向 HBM3E 공급 계약 체결 임박 소식.'],
        why: 'AI 반도체 수요 급증 속 메모리 업황 회복 신호로 해석.',
        links: [
          { source: '한국경제', url: 'https://example.com/1', title: '삼성전자, HBM 생산능력 40% 확대', publishedAt: h(2) },
          { source: '조선비즈', url: 'https://example.com/2', title: '삼성-엔비디아 HBM3E 공급 협상 막바지', publishedAt: h(3) },
        ]
      },
      {
        id: 'kr-005930-2026-02-03-q4-earnings',
        market: 'kr', ticker: '005930',
        startedAt: h(26), updatedAt: h(24),
        type: 'earnings',
        summary2: ['삼성전자 2025년 4분기 영업이익 12.3조원, 전년比 +45%.', 'HBM·AI 서버 DRAM 호조로 DS부문 흑자 전환 확정.'],
        why: '메모리 슈퍼사이클 진입 신호, 업종 전체 re-rating 기대.',
        links: [
          { source: '연합뉴스', url: 'https://example.com/3', title: '삼성전자 4분기 영업익 12.3조', publishedAt: h(26) },
          { source: '매일경제', url: 'https://example.com/4', title: '삼성전자 DS부문 2분기 연속 흑자', publishedAt: h(27) },
        ]
      },
      {
        id: 'kr-000660-2026-02-04-nvidia-deal',
        market: 'kr', ticker: '000660',
        startedAt: h(4), updatedAt: h(2),
        type: 'contract',
        summary2: ['SK하이닉스, 엔비디아와 2026년 HBM3E 독점 공급 계약 체결.', '계약 규모 약 15조원, 연간 공급량 전년 대비 2배 증가.'],
        why: 'AI GPU 시장 지배력 강화, 영업이익률 60% 돌파 전망.',
        links: [
          { source: '블룸버그', url: 'https://example.com/5', title: 'SK Hynix Secures $12B NVIDIA HBM Deal', publishedAt: h(4) },
          { source: '서울경제', url: 'https://example.com/6', title: 'SK하이닉스-엔비디아 15조 계약', publishedAt: h(5) },
        ]
      },
      {
        id: 'us-TSLA-2026-02-04-recall',
        market: 'us', ticker: 'TSLA',
        startedAt: h(6), updatedAt: h(3),
        type: 'recall',
        summary2: ['테슬라, 사이버트럭 12만대 자발적 리콜 발표.', '스티어링 시스템 소프트웨어 결함, OTA 업데이트로 해결 예정.'],
        why: '리콜 규모 대비 주가 영향 제한적 전망, SW 업데이트로 해결 가능.',
        links: [
          { source: 'Reuters', url: 'https://example.com/7', title: 'Tesla Recalls 120,000 Cybertrucks', publishedAt: h(6) },
          { source: 'CNBC', url: 'https://example.com/8', title: 'Tesla Cybertruck Recall: What You Need to Know', publishedAt: h(7) },
        ]
      },
      {
        id: 'us-TSLA-2026-02-03-q4-delivery',
        market: 'us', ticker: 'TSLA',
        startedAt: h(30), updatedAt: h(28),
        type: 'earnings',
        summary2: ['테슬라 4분기 인도량 51만대, 시장 예상 48만대 상회.', '연간 인도량 195만대로 역대 최고 기록 경신.'],
        why: '수요 둔화 우려 해소, 2026년 가이던스 상향 가능성.',
        links: [
          { source: 'Bloomberg', url: 'https://example.com/9', title: 'Tesla Q4 Deliveries Beat Estimates', publishedAt: h(30) },
        ]
      },
      {
        id: 'us-NVDA-2026-02-04-blackwell',
        market: 'us', ticker: 'NVDA',
        startedAt: h(8), updatedAt: h(5),
        type: 'guidance',
        summary2: ['엔비디아, 블랙웰 GPU 2분기 대량 양산 돌입 확인.', 'MS·아마존·구글 등 빅테크 주문량 전분기 대비 3배 증가.'],
        why: 'AI 인프라 투자 가속화 수혜, 연간 매출 1,500억 달러 전망.',
        links: [
          { source: 'CNBC', url: 'https://example.com/10', title: 'NVIDIA Blackwell Mass Production Begins', publishedAt: h(8) },
          { source: 'WSJ', url: 'https://example.com/11', title: 'Big Tech Races to Secure NVIDIA GPUs', publishedAt: h(10) },
        ]
      },
      {
        id: 'us-AAPL-2026-02-03-ai-iphone',
        market: 'us', ticker: 'AAPL',
        startedAt: h(36), updatedAt: h(32),
        type: 'guidance',
        summary2: ['애플, 아이폰17 프로에 자체 AI 칩 탑재 확정.', '온디바이스 AI 성능 40% 향상, 클라우드 의존도 대폭 감소.'],
        why: '삼성·구글 대비 AI 경쟁력 강화, 프리미엄 시장 지배력 확대.',
        links: [
          { source: 'Apple Insider', url: 'https://example.com/12', title: 'iPhone 17 Pro to Feature Apple AI Chip', publishedAt: h(36) },
        ]
      },
      {
        id: 'kr-005380-2026-02-04-us-ev',
        market: 'kr', ticker: '005380',
        startedAt: h(5), updatedAt: h(3),
        type: 'contract',
        summary2: ['현대차, 미국 조지아 공장 EV 생산량 연 40만대로 확대.', 'IRA 보조금 적용 차종 확대, 연간 2.5조원 세액공제 혜택.'],
        why: '미국 EV 시장 점유율 확대 가속, 2위 도약 가시화.',
        links: [
          { source: '한국경제', url: 'https://example.com/13', title: '현대차 조지아공장 증설 확정', publishedAt: h(5) },
        ]
      },
      {
        id: 'kr-035420-2026-02-04-ai-search',
        market: 'kr', ticker: '035420',
        startedAt: h(3), updatedAt: h(1),
        type: 'other',
        summary2: ['네이버, AI 검색 큐(Cue:) 월간 사용자 2,000만 돌파.', '기존 검색 대비 체류시간 35% 증가, 광고 수익성 개선 기대.'],
        why: '생성AI 검색 경쟁에서 국내 시장 선점 효과 가시화.',
        links: [
          { source: '조선비즈', url: 'https://example.com/14', title: '네이버 AI 검색 큐: 2천만 사용자 돌파', publishedAt: h(3) },
        ]
      },
      {
        id: 'us-META-2026-02-03-threads',
        market: 'us', ticker: 'META',
        startedAt: h(28), updatedAt: h(26),
        type: 'earnings',
        summary2: ['메타, 쓰레드 MAU 5억 돌파로 트위터(X) 추월.', '광고 수익화 본격 시작, 2026년 매출 기여 50억 달러 전망.'],
        why: '소셜미디어 경쟁 구도 재편, 신규 성장동력 확보.',
        links: [
          { source: 'TechCrunch', url: 'https://example.com/15', title: 'Threads Hits 500M Users', publishedAt: h(28) },
        ]
      },
      {
        id: 'kr-105560-2026-02-04-dividend',
        market: 'kr', ticker: '105560',
        startedAt: h(4), updatedAt: h(2),
        type: 'earnings',
        summary2: ['KB금융, 2025년 배당금 4,800원 확정, 전년比 +20%.', '주주환원율 53% 달성, 금융지주 중 최고 수준.'],
        why: '밸류업 프로그램 모범 사례, PBR 1배 돌파 기대.',
        links: [
          { source: '매일경제', url: 'https://example.com/16', title: 'KB금융 배당금 4,800원 확정', publishedAt: h(4) },
        ]
      },
      {
        id: 'us-JPM-2026-02-03-rate-outlook',
        market: 'us', ticker: 'JPM',
        startedAt: h(32), updatedAt: h(30),
        type: 'macro',
        summary2: ['JP모건, 2026년 연준 금리 인하 3회 전망 유지.', '상반기 동결 후 하반기 75bp 인하 예상.'],
        why: '글로벌 금리 방향성 판단 참고, 금융주 투자 심리 영향.',
        links: [
          { source: 'Bloomberg', url: 'https://example.com/17', title: 'JPMorgan Sees 3 Fed Rate Cuts in 2026', publishedAt: h(32) },
        ]
      },
      {
        id: 'kr-068270-2026-02-04-fda',
        market: 'kr', ticker: '068270',
        startedAt: h(6), updatedAt: h(4),
        type: 'regulation',
        summary2: ['셀트리온, FDA 바이오시밀러 신약 승인 획득.', '미국 시장 진출 확대, 연간 매출 1.5조원 추가 기대.'],
        why: '글로벌 바이오시밀러 시장 점유율 확대 가속.',
        links: [
          { source: '뉴스1', url: 'https://example.com/18', title: '셀트리온 FDA 승인 획득', publishedAt: h(6) },
        ]
      },
      {
        id: 'us-GOOGL-2026-02-04-antitrust',
        market: 'us', ticker: 'GOOGL',
        startedAt: h(10), updatedAt: h(8),
        type: 'lawsuit',
        summary2: ['구글, 미국 법무부 반독점 소송 1심 패소.', '검색엔진 시장 지배력 남용 인정, 구제책 협의 예정.'],
        why: '사업 분할 가능성 대두, 규제 리스크 장기화 전망.',
        links: [
          { source: 'Reuters', url: 'https://example.com/19', title: 'Google Loses Antitrust Case', publishedAt: h(10) },
        ]
      },
    ];

    // ==================== Utilities ====================
    function findStock(market, ticker) {
      return TOP50.find(s => s.market === market && s.ticker === ticker);
    }

    function getEventsByTicker(market, ticker) {
      return SAMPLE_EVENTS.filter(e => e.market === market && e.ticker === ticker)
        .sort((a, b) => new Date(b.startedAt) - new Date(a.startedAt));
    }

    function getTodayTopEvents(limit = 8) {
      const cutoff = new Date(Date.now() - 24 * 60 * 60 * 1000);
      return SAMPLE_EVENTS
        .filter(e => new Date(e.startedAt) > cutoff)
        .sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt))
        .slice(0, limit);
    }

    function getEventById(id) {
      return SAMPLE_EVENTS.find(e => e.id === id);
    }

    function formatRelTime(iso) {
      const d = new Date(iso);
      const now = new Date();
      const diffMs = now - d;
      const diffMin = Math.floor(diffMs / 60000);
      if (diffMin < 1) return '방금';
      if (diffMin < 60) return `${diffMin}분 전`;
      const diffH = Math.floor(diffMin / 60);
      if (diffH < 24) return `${diffH}시간 전`;
      const diffD = Math.floor(diffH / 24);
      return `${diffD}일 전`;
    }

    function formatDateTime(iso) {
      const d = new Date(iso);
      return d.toLocaleString('ko-KR', { timeZone: 'Asia/Seoul' });
    }

    function formatDate(iso) {
      const d = new Date(iso);
      return d.toLocaleDateString('ko-KR', { timeZone: 'Asia/Seoul', year: 'numeric', month: '2-digit', day: '2-digit' });
    }

    function escapeHtml(str) {
      return String(str || '')
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;');
    }

    // ==================== SEO ====================
    function updateMeta(opts) {
      const { title, description, canonical } = opts;
      document.title = title;
      document.querySelector('meta[name="description"]').content = description;
      document.querySelector('meta[property="og:title"]').content = title;
      document.querySelector('meta[property="og:description"]').content = description;
      document.querySelector('meta[name="twitter:title"]').content = title;
      document.querySelector('meta[name="twitter:description"]').content = description;
      document.getElementById('canonical').href = canonical || window.location.href;
    }

    // ==================== Renderers ====================
    function renderStockGrid(stocks, showBadge = false) {
      return stocks.map(s => {
        const events = getEventsByTicker(s.market, s.ticker);
        const recent = events.filter(e => new Date(e.startedAt) > new Date(Date.now() - 24*60*60*1000)).length;
        return `
          <a href="/stocks/${s.market}/${s.ticker}" class="stock-item">
            <div class="stock-ticker">${escapeHtml(s.ticker)}</div>
            <div class="stock-name">${escapeHtml(s.name_ko)}</div>
            ${recent > 0 ? `<div class="stock-badge">${recent}건 사건</div>` : ''}
          </a>
        `;
      }).join('');
    }

    function renderEventCard(event, showTicker = true) {
      const stock = findStock(event.market, event.ticker);
      const stockName = stock ? stock.name_ko : event.ticker;

      return `
        <a href="/stocks/${event.market}/${event.ticker}/events/${event.id}" class="event-card">
          <div class="event-header">
            ${showTicker ? `
            <div class="event-ticker-info">
              <span class="event-ticker">${escapeHtml(event.ticker)}</span>
              <span class="event-company">${escapeHtml(stockName)}</span>
            </div>
            ` : ''}
            <span class="event-label" data-type="${event.type}">${EVENT_LABELS[event.type] || '기타'}</span>
          </div>
          <ul class="event-summary">
            ${event.summary2.map(s => `<li>${escapeHtml(s)}</li>`).join('')}
          </ul>
          <div class="event-why">
            <strong>왜 중요?</strong> ${escapeHtml(event.why)}
          </div>
          <div class="event-links">
            ${event.links.slice(0, 3).map(link => `
              <span class="event-link">
                <span class="event-link-source">${escapeHtml(link.source)}</span>
                ${escapeHtml(link.title)}
                <span class="event-link-time">${formatRelTime(link.publishedAt)}</span>
              </span>
            `).join('')}
          </div>
          <div class="event-time">최종 업데이트: ${formatRelTime(event.updatedAt)}</div>
        </a>
      `;
    }

    // ==================== Pages ====================
    function renderHomePage(query = {}) {
      const marketFilter = query.market;
      let stocks = TOP50;
      let pageTitle = 'TOP50 종목 사건 아카이브';

      if (marketFilter === 'kr') {
        stocks = TOP50_KR;
        pageTitle = '국내 TOP25 종목';
      } else if (marketFilter === 'us') {
        stocks = TOP50_US;
        pageTitle = '미국 TOP25 종목';
      }

      updateMeta({
        title: `${pageTitle} | miso_daily`,
        description: '국내외 TOP50 종목의 주요 사건을 실시간으로 정리합니다. 실적, 수주, 규제, 소송 등 투자에 중요한 이슈를 사건 단위로 확인하세요.',
      });

      // Update nav active state
      document.querySelectorAll('.nav-link').forEach(el => el.classList.remove('active'));
      const navKey = marketFilter || 'home';
      document.querySelector(`[data-nav="${navKey}"]`)?.classList.add('active');

      const topEvents = getTodayTopEvents(8);

      return `
        <section>
          <div class="section-header">
            <div>
              <h1 class="section-title">오늘의 주요 사건</h1>
              <div class="section-sub">최근 24시간 내 발생한 주요 이슈</div>
            </div>
          </div>
          <div class="label-filters">
            <span class="label-pill active" data-label="all">전체</span>
            ${Object.entries(EVENT_LABELS).map(([k, v]) => `
              <span class="label-pill" data-label="${k}">${v}</span>
            `).join('')}
          </div>
          <div class="event-cards" id="topEvents">
            ${topEvents.length > 0
              ? topEvents.map(e => renderEventCard(e, true)).join('')
              : '<div class="empty-state"><h2>최근 사건 없음</h2><p>최근 24시간 내 등록된 사건이 없습니다.</p></div>'
            }
          </div>
        </section>

        <section style="margin-top:32px;">
          <div class="section-header">
            <div>
              <h2 class="section-title">${marketFilter ? pageTitle : 'TOP50 종목'}</h2>
              <div class="section-sub">${stocks.length}개 종목</div>
            </div>
          </div>
          ${!marketFilter ? `
          <div class="tabs">
            <span class="tab active" data-market="">전체</span>
            <span class="tab" data-market="kr">국내 25</span>
            <span class="tab" data-market="us">미국 25</span>
          </div>
          ` : ''}
          <div class="stock-grid" id="stockGrid">
            ${renderStockGrid(stocks, true)}
          </div>
        </section>
      `;
    }

    function renderStockPage(market, ticker) {
      const stock = findStock(market, ticker);
      if (!stock) {
        return renderNotFound();
      }

      const events = getEventsByTicker(market, ticker);
      const events24h = events.filter(e => new Date(e.startedAt) > new Date(Date.now() - 24*60*60*1000));
      const events7d = events.filter(e => new Date(e.startedAt) > new Date(Date.now() - 7*24*60*60*1000));

      updateMeta({
        title: `${stock.name_ko} (${stock.ticker}) 사건 아카이브 | miso_daily`,
        description: `${stock.name_ko}의 최근 주요 사건을 확인하세요. 실적, 수주, 규제 등 투자에 중요한 이슈를 사건 단위로 정리합니다.`,
        canonical: `${window.location.origin}/stocks/${market}/${ticker}`,
      });

      // Dedupe links
      const allLinks = events.flatMap(e => e.links);
      const seenUrls = new Set();
      const uniqueLinks = allLinks.filter(l => {
        if (seenUrls.has(l.url)) return false;
        seenUrls.add(l.url);
        return true;
      }).slice(0, 10);

      return `
        <nav class="breadcrumb">
          <a href="/top50">홈</a>
          <span class="breadcrumb-sep">›</span>
          <a href="/top50?market=${market}">${market === 'kr' ? '국내' : '미국'}</a>
          <span class="breadcrumb-sep">›</span>
          <span>${stock.name_ko}</span>
        </nav>

        <div class="stock-header">
          <div class="stock-header-main">
            <h1>${escapeHtml(stock.name_ko)}</h1>
            <span class="ticker">${escapeHtml(stock.ticker)}</span>
            <span class="exchange">${escapeHtml(stock.exchange)}</span>
          </div>
        </div>

        <section>
          <div class="section-header">
            <div>
              <h2 class="section-title">최근 24시간 사건</h2>
              <div class="section-sub">${events24h.length}건</div>
            </div>
          </div>
          <div class="event-cards">
            ${events24h.length > 0
              ? events24h.slice(0, 5).map(e => renderEventCard(e, false)).join('')
              : '<div class="empty-state"><p>최근 24시간 내 등록된 사건이 없습니다.</p><a href="/top50" class="related-link">홈으로 돌아가기</a></div>'
            }
          </div>
        </section>

        <section class="timeline-section">
          <div class="section-header">
            <div>
              <h2 class="section-title">최근 7일 타임라인</h2>
              <div class="section-sub">${events7d.length}건</div>
            </div>
          </div>
          <div class="event-cards">
            ${events7d.length > 0
              ? events7d.map(e => renderEventCard(e, false)).join('')
              : '<div class="empty-state"><p>최근 7일 내 등록된 사건이 없습니다.</p></div>'
            }
          </div>
        </section>

        ${uniqueLinks.length > 0 ? `
        <section class="related-section">
          <h3 class="related-title">관련 원문 링크</h3>
          <div class="event-links" style="gap:8px;">
            ${uniqueLinks.map(l => `
              <a href="${escapeHtml(l.url)}" target="_blank" rel="noopener" class="event-link" style="padding:8px 12px;background:rgba(0,0,0,.2);border-radius:8px;">
                <span class="event-link-source">${escapeHtml(l.source)}</span>
                ${escapeHtml(l.title)}
                <span class="event-link-time">${formatRelTime(l.publishedAt)}</span>
              </a>
            `).join('')}
          </div>
        </section>
        ` : ''}

        <section class="related-section">
          <h3 class="related-title">관련 종목</h3>
          <div class="related-links">
            ${(market === 'kr' ? TOP50_KR : TOP50_US)
              .filter(s => s.ticker !== ticker)
              .slice(0, 6)
              .map(s => `<a href="/stocks/${s.market}/${s.ticker}" class="related-link">${escapeHtml(s.name_ko)}</a>`)
              .join('')}
          </div>
        </section>
      `;
    }

    function renderEventPage(market, ticker, eventId) {
      const event = getEventById(eventId);
      const stock = findStock(market, ticker);

      if (!event || !stock) {
        return renderNotFound();
      }

      const dateStr = formatDate(event.startedAt);
      const title = `${stock.name_ko} ${event.summary2[0]} (${dateStr})`;

      updateMeta({
        title: `${title} | miso_daily`,
        description: `${event.summary2.join(' ')} ${event.why}`,
        canonical: `${window.location.origin}/stocks/${market}/${ticker}/events/${eventId}`,
      });

      // Related events (same ticker, different event)
      const relatedEvents = getEventsByTicker(market, ticker)
        .filter(e => e.id !== eventId)
        .slice(0, 3);

      // Related stocks (same market)
      const relatedStocks = (market === 'kr' ? TOP50_KR : TOP50_US)
        .filter(s => s.ticker !== ticker)
        .slice(0, 5);

      return `
        <nav class="breadcrumb">
          <a href="/top50">홈</a>
          <span class="breadcrumb-sep">›</span>
          <a href="/top50?market=${market}">${market === 'kr' ? '국내' : '미국'}</a>
          <span class="breadcrumb-sep">›</span>
          <a href="/stocks/${market}/${ticker}">${stock.name_ko}</a>
          <span class="breadcrumb-sep">›</span>
          <span>사건 상세</span>
        </nav>

        <article class="event-detail-header">
          <span class="event-label" data-type="${event.type}" style="margin-bottom:12px;display:inline-block;">
            ${EVENT_LABELS[event.type] || '기타'}
          </span>
          <h1>${event.summary2.map(s => escapeHtml(s)).join('<br>')}</h1>
          <div class="event-detail-meta">
            <a href="/stocks/${market}/${ticker}" style="color:var(--accent2);font-weight:600;">
              ${escapeHtml(stock.ticker)} ${escapeHtml(stock.name_ko)}
            </a>
            <span>·</span>
            <span>${formatDateTime(event.startedAt)}</span>
            <span>·</span>
            <span>업데이트: ${formatRelTime(event.updatedAt)}</span>
          </div>
        </article>

        <section style="margin-bottom:24px;">
          <div class="event-why" style="font-size:15px;padding:16px;">
            <strong>왜 중요한가?</strong><br>
            ${escapeHtml(event.why)}
          </div>
        </section>

        <section>
          <h2 class="section-title" style="font-size:16px;margin-bottom:12px;">근거 링크</h2>
          <div class="event-links" style="gap:10px;">
            ${event.links.map(l => `
              <a href="${escapeHtml(l.url)}" target="_blank" rel="noopener" class="event-link" style="padding:12px 14px;background:rgba(0,0,0,.25);border-radius:10px;border:1px solid var(--line);">
                <span class="event-link-source">${escapeHtml(l.source)}</span>
                <span style="flex:1;">${escapeHtml(l.title)}</span>
                <span class="event-link-time">${formatDateTime(l.publishedAt)}</span>
              </a>
            `).join('')}
          </div>
        </section>

        ${relatedEvents.length > 0 ? `
        <section class="related-section">
          <h3 class="related-title">이 종목의 다른 사건</h3>
          <div class="event-cards">
            ${relatedEvents.map(e => renderEventCard(e, false)).join('')}
          </div>
        </section>
        ` : ''}

        <section class="related-section">
          <h3 class="related-title">관련 종목</h3>
          <div class="related-links">
            ${relatedStocks.map(s => `
              <a href="/stocks/${s.market}/${s.ticker}" class="related-link">${escapeHtml(s.name_ko)}</a>
            `).join('')}
          </div>
        </section>
      `;
    }

    function renderNotFound() {
      updateMeta({
        title: '페이지를 찾을 수 없습니다 | miso_daily',
        description: '요청하신 페이지를 찾을 수 없습니다.',
      });

      return `
        <div class="empty-state">
          <h2>페이지를 찾을 수 없습니다</h2>
          <p>요청하신 페이지가 존재하지 않거나 삭제되었습니다.</p>
          <a href="/top50" class="related-link" style="display:inline-block;margin-top:16px;">홈으로 돌아가기</a>
        </div>
      `;
    }

    // ==================== Router ====================
    const app = document.getElementById('app');

    function parseRoute() {
      const path = window.location.pathname;
      const query = Object.fromEntries(new URLSearchParams(window.location.search));

      // /top50 or /
      if (path === '/top50' || path === '/' || path === '') {
        return { page: 'home', query };
      }

      // /stocks/:market/:ticker/events/:eventId
      const eventMatch = path.match(/^\/stocks\/([^/]+)\/([^/]+)\/events\/(.+)$/);
      if (eventMatch) {
        return { page: 'event', market: eventMatch[1], ticker: eventMatch[2], eventId: eventMatch[3] };
      }

      // /stocks/:market/:ticker
      const stockMatch = path.match(/^\/stocks\/([^/]+)\/([^/]+)$/);
      if (stockMatch) {
        return { page: 'stock', market: stockMatch[1], ticker: stockMatch[2] };
      }

      return { page: '404' };
    }

    function render() {
      const route = parseRoute();

      switch (route.page) {
        case 'home':
          app.innerHTML = renderHomePage(route.query);
          bindHomeEvents();
          break;
        case 'stock':
          app.innerHTML = renderStockPage(route.market, route.ticker);
          break;
        case 'event':
          app.innerHTML = renderEventPage(route.market, route.ticker, route.eventId);
          break;
        default:
          app.innerHTML = renderNotFound();
      }

      window.scrollTo(0, 0);
    }

    function navigate(href, replace = false) {
      if (replace) {
        window.history.replaceState({}, '', href);
      } else {
        window.history.pushState({}, '', href);
      }
      render();
    }

    function bindHomeEvents() {
      // Tab clicks
      document.querySelectorAll('.tab').forEach(tab => {
        tab.addEventListener('click', () => {
          const market = tab.dataset.market;
          const url = market ? `/top50?market=${market}` : '/top50';
          navigate(url);
        });
      });

      // Label filter clicks
      let activeLabel = 'all';
      document.querySelectorAll('.label-pill').forEach(pill => {
        pill.addEventListener('click', () => {
          document.querySelectorAll('.label-pill').forEach(p => p.classList.remove('active'));
          pill.classList.add('active');
          activeLabel = pill.dataset.label;

          const topEvents = getTodayTopEvents(20);
          const filtered = activeLabel === 'all'
            ? topEvents.slice(0, 8)
            : topEvents.filter(e => e.type === activeLabel).slice(0, 8);

          const container = document.getElementById('topEvents');
          if (filtered.length > 0) {
            container.innerHTML = filtered.map(e => renderEventCard(e, true)).join('');
          } else {
            container.innerHTML = '<div class="empty-state"><h2>해당 라벨의 사건 없음</h2><p>최근 24시간 내 해당 라벨의 사건이 없습니다.</p></div>';
          }
        });
      });
    }

    // ==================== Link Interception ====================
    document.addEventListener('click', (e) => {
      const link = e.target.closest('a[href]');
      if (!link) return;

      const href = link.getAttribute('href');

      // Skip external links, new tabs, special links
      if (
        link.target === '_blank' ||
        link.hasAttribute('download') ||
        href.startsWith('http') ||
        href.startsWith('//') ||
        href.startsWith('#') ||
        href.startsWith('mailto:') ||
        e.ctrlKey || e.metaKey || e.shiftKey
      ) {
        return;
      }

      e.preventDefault();
      navigate(href);
    });

    // ==================== Init ====================
    window.addEventListener('popstate', render);
    document.getElementById('year').textContent = new Date().getFullYear();

    // Redirect root to /top50
    if (window.location.pathname === '/' || window.location.pathname === '') {
      navigate('/top50', true);
    } else {
      render();
    }
  </script>
</body>
</html>
